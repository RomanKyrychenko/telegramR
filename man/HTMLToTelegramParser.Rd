% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/html.R
\name{HTMLToTelegramParser}
\alias{HTMLToTelegramParser}
\title{HTMLToTelegramParser}
\description{
Walks an HTML fragment and builds a plain text string and a list of
telegram-style message entities.
}
\details{
Traverses the HTML node tree, tracking active tags and their metadata to
  construct Telegram message entities (bold, italic, underline, strike,
  blockquote, code, preformatted, links, custom emoji). Maintains accumulated
  text while adjusting entity offsets and lengths, handling special cases such
  as language hints in `<pre><code>` blocks and anchored URLs.
}
\note{
Wraps the provided fragment in a `<div>` before parsing to satisfy
  `xml2::read_html`, and automatically finalizes open entities as tags close.
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{text}}{accumulated plain text}

\item{\code{entities}}{list of entity lists}

\item{\code{building_entities}}{named list of entities currently being built}

\item{\code{open_tags}}{stack of currently open tags}

\item{\code{open_tags_meta}}{stack of metadata associated with open tags}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-HTMLToTelegramParser-new}{\code{HTMLToTelegramParser$new()}}
\item \href{#method-HTMLToTelegramParser-push_tag}{\code{HTMLToTelegramParser$push_tag()}}
\item \href{#method-HTMLToTelegramParser-pop_tag}{\code{HTMLToTelegramParser$pop_tag()}}
\item \href{#method-HTMLToTelegramParser-current_tag}{\code{HTMLToTelegramParser$current_tag()}}
\item \href{#method-HTMLToTelegramParser-current_meta}{\code{HTMLToTelegramParser$current_meta()}}
\item \href{#method-HTMLToTelegramParser-start_element}{\code{HTMLToTelegramParser$start_element()}}
\item \href{#method-HTMLToTelegramParser-handle_text}{\code{HTMLToTelegramParser$handle_text()}}
\item \href{#method-HTMLToTelegramParser-end_element}{\code{HTMLToTelegramParser$end_element()}}
\item \href{#method-HTMLToTelegramParser-parse_node}{\code{HTMLToTelegramParser$parse_node()}}
\item \href{#method-HTMLToTelegramParser-feed}{\code{HTMLToTelegramParser$feed()}}
\item \href{#method-HTMLToTelegramParser-clone}{\code{HTMLToTelegramParser$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-new"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-new}{}}}
\subsection{Method \code{new()}}{
Initializes the parser state.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$new()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A new instance of HTMLToTelegramParser.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-push_tag"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-push_tag}{}}}
\subsection{Method \code{push_tag()}}{
Push a tag and optional metadata onto the open tags stack.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$push_tag(tag, meta = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{tag}}{The tag name to push.}

\item{\code{meta}}{Optional metadata associated with the tag.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
None.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-pop_tag"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-pop_tag}{}}}
\subsection{Method \code{pop_tag()}}{
Pop the top tag and its metadata from the open tags stack.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$pop_tag()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A list containing the popped tag and its metadata, or NULL if the stack
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-current_tag"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-current_tag}{}}}
\subsection{Method \code{current_tag()}}{
Get the current top tag from the open tags stack.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$current_tag()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
The top tag name, or NULL if the stack is empty.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-current_meta"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-current_meta}{}}}
\subsection{Method \code{current_meta()}}{
Get the current top metadata from the open tags stack.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$current_meta()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
The top metadata value, or NULL if the stack is empty.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-start_element"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-start_element}{}}}
\subsection{Method \code{start_element()}}{
Handle the start of an HTML element, updating state and building entities as needed.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$start_element(tag, attrs)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{tag}}{The name of the HTML tag.}

\item{\code{attrs}}{A named list of attributes for the tag.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
None.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-handle_text"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-handle_text}{}}}
\subsection{Method \code{handle_text()}}{
Handle text nodes, updating accumulated text and entity lengths.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$handle_text(text)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{text}}{The text content to handle.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
None.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-end_element"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-end_element}{}}}
\subsection{Method \code{end_element()}}{
Handle the end of an HTML element, finalizing any associated entities.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$end_element(tag)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{tag}}{The name of the HTML tag.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
None.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-parse_node"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-parse_node}{}}}
\subsection{Method \code{parse_node()}}{
Recursively parse an XML node and its children.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$parse_node(node)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{node}}{The XML node to parse.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
None.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-feed"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-feed}{}}}
\subsection{Method \code{feed()}}{
Parse an HTML fragment, updating the parser state with text and entities.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$feed(html_fragment)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{html_fragment}}{A character string containing the HTML fragment to parse.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
None.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-HTMLToTelegramParser-clone"></a>}}
\if{latex}{\out{\hypertarget{method-HTMLToTelegramParser-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{HTMLToTelegramParser$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
