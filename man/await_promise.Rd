% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mtprotosender.R
\name{await_promise}
\alias{await_promise}
\title{Synchronously resolve a promise by pumping the later event loop.}
\usage{
await_promise(p, timeout = 30)
}
\arguments{
\item{p}{A promise (or plain value).}

\item{timeout}{Maximum seconds to wait before raising an error.}
}
\value{
The fulfilled value, or stops with the rejection reason.
}
\description{
R promises schedule their callbacks via `later::later()`.  When running
inside a tight synchronous loop (no Shiny / httpuv reactor) those callbacks
never fire unless we explicitly call `later::run_now()`.  This helper does
exactly that: it installs fulfillment/rejection handlers and then pumps
`later::run_now()` in a busy-wait until the promise settles.
}
\details{
If the input is NOT a promise it is returned as-is, so this is safe to call
on any value.
}
\keyword{internal}
